{% extends "rentals/home.html" %}
{% block content %}
<h2>Пункты выдачи</h2>
<div id="map" style="width:100%;height:400px;"></div>
<ul class="list-group my-4">
    {% for loc in locations %}
    <li class="list-group-item">
        <strong>{{ loc.name }}</strong> — {{ loc.address }}, {{ loc.city }}
    </li>
    {% endfor %}
</ul>
<script src="https://api-maps.yandex.ru/2.1/?lang=ru_RU"></script>
<script>
ymaps.ready(function () {
    var map = new ymaps.Map('map', {
        center: [54.3154, 48.4384], // Центр по умолчанию (Москва)
        zoom: 11
    });

    {% for loc in locations %}
    {% if loc.latitude and loc.longitude %}
    var placemark = new ymaps.Placemark(
        [{{ loc.latitude }}, {{ loc.longitude }}],
        {
            balloonContent: "<strong>{{ loc.name|escapejs }}</strong><br>{{ loc.address|escapejs }}, {{ loc.city|escapejs }}"
        }
    );
    map.geoObjects.add(placemark);
    {% endif %}
    {% endfor %}
});
</script>
{% endblock %}